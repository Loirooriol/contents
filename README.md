# CSS ::contents pseudo-element proposal

All non-replaced elements have a `::contents` pseudo-element, which wraps all the contents inside the element, not including contents generated by `::before` and `::after`.

By default, a `::contents` pseudo-element is styled with [`display: contents`](https://www.w3.org/TR/css-display-3/#valdef-display-contents), so it does not generate any boxes and is treated as if it had been replaced with its children.

> **Issue 1**
> 
> Should this be achieved by defining the [initial value](https://www.w3.org/TR/css-cascade-4/#initial-values) of [`display`](https://www.w3.org/TR/css-display-3/#the-display-properties) to be [`contents`](https://www.w3.org/TR/css-display-3/#valdef-display-contents) for `::contents` pseudo-elements? Or by requiring user agents to include `::contents { display: contents }` in their [default style sheet](https://www.w3.org/TR/css-cascade-4/#cascade-origin-ua)?

A `::contents` can be styled exactly like any normal document-sourced element in the document tree.
When its [`display`](https://www.w3.org/TR/css-display-3/#the-display-properties) property does not compute to `contents` nor `none`, the pseudo-element generates boxes as if it was an immediate children of its originating element. When its [`display`](https://www.w3.org/TR/css-display-3/#the-display-properties) property computes to [`none`](https://www.w3.org/TR/css-display-3/#valdef-display-none), the pseudo-element and the contents of the originating element generate no boxes.

> **Example 1**
> 
> Example: The fictional tag sequence for this HTML fragment with the following rules
> 
> ```css
> div::before { content: 'A'; }
> div::contents { display: inline; }
> div::after { content: 'C'; }
> ```
> ```html
> <div>B</div>
> ```
> 
> is:
> 
> ```html
> <div>
>   <div::before>A</div::before>
>   <div::contents>B</div::contents>
>   <div::after>C</div::after>
> </div>
> ```

> **Example 2**
> 
> Defining margins that only apply between flex-items ([issue 592](https://github.com/w3c/csswg-drafts/issues/592)) can be easily done as follows:
> 
> ```css
> .flex-container {
>   overflow: hidden;
> }
> .flex-container::contents {
>   display: flex;
>   margin: -25px;
> }
> .flex-container > .flex-item {
>   margin: 25px;
> }
> ```

> **Example 3**
> 
> The `::before` and `::after` pseudo-elements generate content inside an element. For example,
> 
> ```css
> div { /* border, margin, ... */ }
> div::before { content: 'A'; }
> div::after { content: 'C'; }
> ```
> ```html
> Previous
> <div>B</div>
> Following
> ```
>
> produces the following fictional tag sequence:
> 
> ```html
> Previous
> <div>
>   <div::before>A</div::before>
>   B
>   <div::after>C</div::after>
> </div>
> Following
> ```
> 
> However, sometimes it is desirable to generate content outside the element. This can be accomplished by adding
> 
> ```css
> .container { display: contents; }
> .container::contents { display: block; /* border, margin, ... */ }
> ```
>
> resulting in
>
> ```html
> Previous
> <div::before>A</div::before>
> <div::contents>B</div::contents>
> <div::after>A</div::after>
> Following
> ```

## Inheritance and the `::contents` Pseudo-element

A `::contents` pseudo-element inherits from its generating element.

A child element inherits inherited properties from the `::contents` pseudo-element originated by the parent element.

> **Issue 2**
> 
> What should happen with non-inherited properties? Same as for `::first-line` ([issue 1097](https://github.com/w3c/csswg-drafts/issues/1097))
